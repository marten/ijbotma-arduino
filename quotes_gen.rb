#!/usr/bin/ruby

require 'csv'

def c_string(s)
  s = s.gsub(/\n/, '\\\\n').gsub(/"/, '\\"')
  return '"' + s + '"'
end

puts '// AUTOGENERATED. DO NOT EDIT. INVOKE \'make\' TO REGENERATE.'
puts ''
puts '#include "quotes.h"'
puts ''
puts 'char const *const QUOTES[][2] = {'
count = 0
CSV.new(STDIN).each do |row|
  puts "  {#{c_string row[0]}, #{c_string row[1]}},"
  count += 1
end
puts '};'
puts ''
puts "int const NUM_QUOTES = #{count};"
